<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LedgerDB | Git-Native Document Database</title>
    <meta name="description" content="LedgerDB is a git-native document database for auditability, offline-first writes, and verifiable state history.">
    <meta name="theme-color" content="#050505">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="LedgerDB | Git-Native Document Database">
    <meta property="og:description" content="Git-native document database for auditability, offline-first writes, and verifiable state history.">
    <meta property="og:url" content="https://github.com/osvaldoandrade/ledgerdb">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Space Grotesk', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        brand: {
                            bg: '#050505',       // Pitch black
                            surface: '#0A0A0A',  // Very dark grey
                            border: '#333333',   // Subtle border
                            primary: '#8B5CF6',  // Violet 500 (Base identity)
                            secondary: '#F59E0B',// Amber 500
                            success: '#10B981',  // Emerald 500
                            error: '#EF4444',    // Red 500
                            text: '#E5E5E5',     // Light grey
                            muted: '#737373'     // Darker grey
                        }
                    },
                    backgroundImage: {
                        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #050505;
            color: #E5E5E5;
        }
        
        /* Glass/Industrial Panel */
        .glass-panel {
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid #333;
            transition: all 0.3s ease;
        }
        
        .glass-panel:hover {
            border-color: #8B5CF6;
            box-shadow: 0 4px 20px -5px rgba(139, 92, 246, 0.15);
        }

        /* Glow Text */
        .glow-text {
            text-shadow: 0 0 15px rgba(139, 92, 246, 0.5);
        }

        /* Chart Containers */
        .chart-container {
            position: relative;
            width: 100%;
            height: 300px;
        }

        /* Reveal Animation Classes */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.5, 0, 0, 1);
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #050505; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        /* Tree Diagram Lines */
        .tree-line-v { width: 1px; background-color: #333; margin: 0 auto; }
        .tree-line-h { height: 1px; background-color: #333; }

        /* FAQ Details */
        details > summary {
            list-style: none;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }

        /* Terminal Blink */
        .blink {
            animation: blinker 1s linear infinite;
        }
        @keyframes blinker {
            50% { opacity: 0; }
        }
    </style>
</head>
<body class="antialiased selection:bg-brand-primary selection:text-white font-mono">

    <!-- Navbar -->
    <nav class="fixed top-0 w-full z-50 border-b border-brand-border bg-brand-bg/90 backdrop-blur-md">
        <div class="container mx-auto px-6 h-16 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <span class="font-display font-bold text-xl tracking-tight text-white hover:text-brand-primary transition-colors cursor-pointer uppercase">
                    <span class="text-brand-primary">>_</span> LedgerDB
                </span>
            </div>
            
            <div class="hidden md:flex items-center gap-8 text-xs font-bold uppercase tracking-widest text-brand-muted">
                <a href="#overview" class="hover:text-white transition-colors">[Overview]</a>
                <a href="#architecture" class="hover:text-white transition-colors">[Architecture]</a>
                <a href="#performance" class="hover:text-white transition-colors">[Performance]</a>
                <a href="#faq" class="hover:text-white transition-colors">[FAQ]</a>
            </div>

            <div class="flex items-center gap-4">
                <a href="#get-started" class="hidden sm:inline-flex items-center justify-center px-4 py-2 text-xs font-bold text-black bg-white uppercase tracking-wide hover:bg-gray-200 transition-colors">
                    Get Started
                </a>
                <a href="./wiki/" class="hidden sm:inline-flex items-center justify-center px-4 py-2 text-xs font-bold text-brand-text border border-brand-border uppercase tracking-wide hover:border-brand-primary hover:text-white transition-colors">
                    Docs Portal
                </a>
                <a href="https://github.com/osvaldoandrade/ledgerdb" target="_blank" class="text-brand-muted hover:text-white transition-colors">
                    <i class="fa-brands fa-github text-lg"></i>
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="relative pt-32 lg:pt-48 pb-12 overflow-hidden">
        <!-- Ambient Glow -->
        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-[600px] bg-gradient-radial from-brand-primary/10 to-transparent opacity-40 pointer-events-none"></div>

        <div class="container mx-auto px-4 text-center relative z-10">
            
            <h1 class="text-4xl md:text-7xl font-display font-bold leading-none mb-6 text-white tracking-tight reveal">
                Database as <span class="text-brand-primary glow-text">Code</span>.
            </h1>
            
            <p class="text-lg text-brand-muted max-w-2xl mx-auto mb-10 font-sans reveal" style="transition-delay: 100ms;">
                Immutable transaction files inside a Git repository. <br class="hidden md:block" />
                No global locks. Deterministic concurrency. 100% Audit trail.
            </p>
        </div>
    </header>

    <main class="space-y-32 pb-32">

        <!-- SECTION: OVERVIEW VIDEO -->
        <section id="overview" class="container mx-auto px-4 reveal" style="transition-delay: 200ms;">
            <div class="max-w-4xl mx-auto border border-brand-border bg-black shadow-2xl p-1 relative group">
                <div class="relative w-full pb-[56.25%] h-0 bg-brand-surface">
                    <iframe 
                        src="https://drive.google.com/file/d/19FoRjdSorkD1QhizksgO8V3ahZde0H_4/preview" 
                        class="absolute top-0 left-0 w-full h-full"
                        allow="autoplay"
                        allowfullscreen
                        frameborder="0">
                    </iframe>
                </div>
            </div>
        </section>

        <!-- SECTION: FEATURES MATRIX (NEW) -->
        <section id="features" class="container mx-auto px-4 reveal">
            <div class="text-center mb-16">
                <h2 class="text-2xl md:text-3xl font-display font-bold mb-2 text-white uppercase tracking-tight">Core Capabilities</h2>
                <div class="h-1 w-10 bg-brand-primary mx-auto"></div>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
                
                <!-- Card 1 -->
                <div class="glass-panel p-8 group hover:bg-brand-surface/50 transition-all duration-300">
                    <div class="w-12 h-12 mb-6 flex items-center justify-center border border-brand-border bg-black group-hover:border-brand-primary/50 transition-colors">
                        <i class="fa-brands fa-git-alt text-2xl text-brand-primary"></i>
                    </div>
                    <h3 class="text-white font-bold uppercase mb-3 tracking-wide">Git-Native</h3>
                    <p class="text-brand-muted text-sm leading-relaxed font-sans">
                        Database transactions are stored as standard Git objects. Every write is a commit, every sync is a push.
                    </p>
                </div>

                <!-- Card 2 -->
                <div class="glass-panel p-8 group hover:bg-brand-surface/50 transition-all duration-300">
                    <div class="w-12 h-12 mb-6 flex items-center justify-center border border-brand-border bg-black group-hover:border-brand-secondary/50 transition-colors">
                        <i class="fa-solid fa-database text-2xl text-brand-secondary"></i>
                    </div>
                    <h3 class="text-white font-bold uppercase mb-3 tracking-wide">SQLite Sidecar</h3>
                    <p class="text-brand-muted text-sm leading-relaxed font-sans">
                        Reads are served from a materialized SQLite index. Get the write speed of append-only logs with the query power of SQL.
                    </p>
                </div>

                <!-- Card 3 -->
                <div class="glass-panel p-8 group hover:bg-brand-surface/50 transition-all duration-300">
                    <div class="w-12 h-12 mb-6 flex items-center justify-center border border-brand-border bg-black group-hover:border-brand-success/50 transition-colors">
                        <i class="fa-solid fa-fingerprint text-2xl text-brand-success"></i>
                    </div>
                    <h3 class="text-white font-bold uppercase mb-3 tracking-wide">Tamper-Evident</h3>
                    <p class="text-brand-muted text-sm leading-relaxed font-sans">
                        Built on a Merkle DAG. Every state change is cryptographically linked to its parent. History cannot be rewritten without detection.
                    </p>
                </div>

                <!-- Card 4 -->
                <div class="glass-panel p-8 group hover:bg-brand-surface/50 transition-all duration-300">
                    <div class="w-12 h-12 mb-6 flex items-center justify-center border border-brand-border bg-black group-hover:border-white/50 transition-colors">
                        <i class="fa-solid fa-wifi text-2xl text-white"></i>
                    </div>
                    <h3 class="text-white font-bold uppercase mb-3 tracking-wide">Offline-First</h3>
                    <p class="text-brand-muted text-sm leading-relaxed font-sans">
                        Writes occur locally and sync asynchronously. The system is designed for partition tolerance and eventual consistency.
                    </p>
                </div>

                <!-- Card 5 -->
                <div class="glass-panel p-8 group hover:bg-brand-surface/50 transition-all duration-300">
                    <div class="w-12 h-12 mb-6 flex items-center justify-center border border-brand-border bg-black group-hover:border-brand-primary/50 transition-colors">
                        <i class="fa-solid fa-file-contract text-2xl text-brand-primary"></i>
                    </div>
                    <h3 class="text-white font-bold uppercase mb-3 tracking-wide">Strict Schema</h3>
                    <p class="text-brand-muted text-sm leading-relaxed font-sans">
                        Enforce structure with JSON Schema. Writes are validated before they hit the ledger, ensuring data quality at the source.
                    </p>
                </div>

                <!-- Card 6 -->
                <div class="glass-panel p-8 group hover:bg-brand-surface/50 transition-all duration-300">
                    <div class="w-12 h-12 mb-6 flex items-center justify-center border border-brand-border bg-black group-hover:border-brand-secondary/50 transition-colors">
                        <i class="fa-solid fa-rotate text-2xl text-brand-secondary"></i>
                    </div>
                    <h3 class="text-white font-bold uppercase mb-3 tracking-wide">Atomic CAS</h3>
                    <p class="text-brand-muted text-sm leading-relaxed font-sans">
                        Concurrency is handled via optimistic locking (Compare-And-Swap) on the Git reference. No global locks required.
                    </p>
                </div>

            </div>
        </section>

        <!-- SECTION 0: GET STARTED (Terminal Tabs) -->
        <section id="get-started" class="container mx-auto px-4 reveal">
            <div class="text-center mb-12">
                <h2 class="text-2xl md:text-3xl font-display font-bold mb-2 text-white uppercase tracking-tight">Quick Start</h2>
                <div class="h-1 w-10 bg-brand-primary mx-auto"></div>
                <p class="text-brand-muted mt-4 font-sans text-sm">
                    Git-native ledger with a SQLite sidecar index.
                </p>
            </div>

            <div class="max-w-4xl mx-auto">
                <div class="border border-brand-border bg-black shadow-2xl">
                    <div class="flex border-b border-brand-border bg-brand-surface overflow-x-auto">
                        <button onclick="switchTab('cli')" id="btn-cli" class="px-6 py-3 text-xs font-bold text-white bg-black border-t-2 border-brand-primary tracking-wider transition-all">CLI</button>
                        <button onclick="switchTab('go')" id="btn-go" class="px-6 py-3 text-xs font-bold text-brand-muted hover:text-white hover:bg-black/50 tracking-wider transition-all">GO</button>
                        <button onclick="switchTab('rust')" id="btn-rust" class="px-6 py-3 text-xs font-bold text-brand-muted hover:text-white hover:bg-black/50 tracking-wider transition-all">RUST</button>
                        <button onclick="switchTab('ts')" id="btn-ts" class="px-6 py-3 text-xs font-bold text-brand-muted hover:text-white hover:bg-black/50 tracking-wider transition-all">TYPESCRIPT</button>
                    </div>

                    <div id="content-cli" class="p-6 bg-black font-mono text-xs overflow-x-auto h-[350px] text-brand-text">
<pre><code class="language-bash"><span class="text-brand-muted"># 1. Build</span>
<span class="text-brand-primary">$</span> make build

<span class="text-brand-muted"># 2. Init repo (sharded + append history)</span>
<span class="text-brand-primary">$</span> ledgerdb init --name "LedgerDB" --repo ./ledgerdb.git \
    --layout sharded --history-mode append

<span class="text-brand-muted"># 3. Apply schema</span>
<span class="text-brand-primary">$</span> ledgerdb collection apply tasks \
    --schema ./schemas/task.json \
    --indexes "status,assignee"

<span class="text-brand-muted"># 4. Write data</span>
<span class="text-brand-primary">$</span> ledgerdb doc put tasks "task_0001" \
    --payload '{"title":"Ship v1","status":"todo","priority":"high"}'

<span class="text-brand-success">✔ Commit 8a7b9c written.</span><span class="blink">_</span></code></pre>
                    </div>

                    <div id="content-go" class="p-6 bg-black font-mono text-xs overflow-x-auto h-[350px] text-brand-text hidden">
<pre><code class="language-go"><span class="text-brand-primary">package</span> main

<span class="text-brand-primary">import</span> "github.com/osvaldoandrade/ledgerdb/sdk/go/ledgerdb"

<span class="text-brand-primary">func</span> main() {
  db, _ := ledgerdb.Open("./ledgerdb.git")
  
  <span class="text-brand-muted">// Atomic write</span>
  _ = db.Collection("tasks").Put("task_0001", map[string]any{
    "title": "Ship v1",
    "status": "todo",
    "priority": "high",
  })

  <span class="text-brand-muted">// Sidecar indexing</span>
  _ = db.Index().Watch(ledgerdb.IndexOptions{
    Path: "./index.db",
    Mode: "state",
    Interval: "1s",
    Fast: true,
  })
}</code></pre>
                    </div>

                    <div id="content-rust" class="p-6 bg-black font-mono text-xs overflow-x-auto h-[350px] text-brand-text hidden">
<pre><code class="language-rust"><span class="text-brand-primary">use</span> ledgerdb::Client; 

<span class="text-brand-muted">#[tokio::main]</span>
<span class="text-brand-primary">async fn</span> main() -> Result<(), ledgerdb::Error> {
    <span class="text-brand-primary">let</span> db = Client::open("./ledgerdb.git").await?;
    
    db.collection("tasks")
        .put("task_0001", serde_json::json!({
            "title": "Ship v1",
            "status": "todo",
            "priority": "high"
        }))
        .await?;

    Ok(())
}</code></pre>
                    </div>

                    <div id="content-ts" class="p-6 bg-black font-mono text-xs overflow-x-auto h-[350px] text-brand-text hidden">
<pre><code class="language-typescript"><span class="text-brand-primary">import</span> { LedgerDB } from "@ledgerdb/sdk";

<span class="text-brand-primary">const</span> db = await LedgerDB.open({ repo: "./ledgerdb.git" });

<span class="text-brand-muted">// Write</span>
await db.collection("tasks").put("task_0001", {
  title: "Ship v1",
  status: "todo",
  priority: "high"
});

<span class="text-brand-muted">// Index</span>
await db.index.watch({
  db: "./index.db",
  mode: "state",
  interval: "1s",
  fast: true
});</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 1: ARCHITECTURE (Visual Tree) -->
        <section id="architecture" class="container mx-auto px-4 reveal">
            <div class="text-center mb-16">
                <h2 class="text-2xl md:text-3xl font-display font-bold mb-2 text-white uppercase tracking-tight">System Design</h2>
                <div class="h-1 w-10 bg-brand-secondary mx-auto"></div>
                <p class="text-brand-muted mt-4 font-sans text-sm">
                    History lives in <code>documents/</code>. State in <code>state/</code>. Schema in <code>collections/</code>.
                </p>
            </div>

            <div class="max-w-5xl mx-auto glass-panel p-8 md:p-12 relative overflow-hidden">
                <!-- Subtle Grid Background -->
                <div class="absolute inset-0 opacity-[0.05]" style="background-image: linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px); background-size: 20px 20px;"></div>

                <!-- Tree Diagram -->
                <div class="relative z-10 font-mono text-xs md:text-sm">
                    <!-- Root -->
                    <div class="flex flex-col items-center">
                        <div class="bg-black border border-brand-border px-6 py-3 shadow-xl flex items-center gap-3 relative z-10">
                            <i class="fa-solid fa-server text-brand-primary"></i>
                            <div>
                                <div class="font-bold text-white">db-root/</div>
                                <div class="text-[10px] text-brand-muted flex items-center gap-2">
                                    <i class="fa-regular fa-file-lines"></i> db.yaml
                                </div>
                            </div>
                        </div>
                        <div class="tree-line-v h-8"></div>
                    </div>

                    <!-- Connectors -->
                    <div class="flex justify-center relative mb-8">
                        <div class="w-3/4 border-t border-brand-border absolute top-0"></div>
                        <!-- Vertical Lines Drop -->
                        <div class="w-full flex justify-between px-[12.5%]">
                            <div class="tree-line-v h-8"></div> <!-- Left -->
                            <div class="tree-line-v h-8"></div> <!-- Center -->
                            <div class="tree-line-v h-8"></div> <!-- Right -->
                        </div>
                    </div>

                    <!-- Branches -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        
                        <!-- Col 1: Config -->
                        <div class="flex flex-col items-center">
                            <div class="glass-panel w-full p-4 border-t-2 border-t-brand-secondary">
                                <div class="flex items-center gap-2 mb-3 text-brand-secondary font-bold">
                                    <i class="fa-regular fa-folder-open"></i> collections/
                                </div>
                                <ul class="space-y-2 text-[10px] text-brand-muted pl-4">
                                    <li class="flex items-center gap-2"><i class="fa-solid fa-file-code"></i> schema.json</li>
                                    <li class="flex items-center gap-2"><i class="fa-solid fa-list-check"></i> indexes.json</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Col 2: Documents (Hot) -->
                        <div class="flex flex-col items-center transform md:-translate-y-4">
                            <div class="glass-panel w-full p-4 border-t-2 border-t-brand-primary shadow-[0_0_30px_-10px_rgba(139,92,246,0.15)]">
                                <div class="flex items-center justify-between mb-3 text-brand-primary font-bold">
                                    <div class="flex items-center gap-2"><i class="fa-regular fa-folder-open"></i> documents/</div>
                                    <div class="flex items-center gap-2">
                                        <span class="text-[9px] border border-brand-primary/50 text-brand-primary px-1">SHARDED</span>
                                    </div>
                                </div>
                                <div class="bg-brand-surface rounded p-3 border border-brand-border">
                                    <div class="text-[10px] text-brand-muted mb-2">DOC_&lt;hash&gt;/</div>
                                    <ul class="space-y-2 text-[10px] pl-2 border-l border-brand-border ml-1">
                                        <li class="flex items-center justify-between text-white font-bold group cursor-pointer">
                                            <span><i class="fa-solid fa-location-arrow text-brand-primary mr-1"></i> HEAD</span>
                                            <span class="text-[9px] text-brand-muted">POINTER</span>
                                        </li>
                                        <li class="flex items-center gap-2 text-brand-primary"><i class="fa-regular fa-file-lines"></i> tx/2025..._put.txpb</li>
                                        <li class="flex items-center gap-2 text-brand-muted"><i class="fa-regular fa-file-lines"></i> tx/2025..._patch.txpb</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Col 3: State -->
                        <div class="flex flex-col items-center">
                            <div class="glass-panel w-full p-4 border-t-2 border-t-brand-success opacity-80 hover:opacity-100 transition-opacity">
                                <div class="flex items-center justify-between mb-3 text-brand-success font-bold">
                                    <div class="flex items-center gap-2"><i class="fa-regular fa-folder-open"></i> state/</div>
                                    <div class="flex items-center gap-2">
                                        <span class="text-[9px] border border-brand-success/50 text-brand-success px-1">LATEST</span>
                                    </div>
                                </div>
                                <div class="bg-brand-surface rounded p-3 border border-brand-border">
                                    <div class="text-[10px] text-brand-muted mb-2">DOC_&lt;hash&gt;/</div>
                                    <ul class="space-y-2 text-[10px] pl-2 border-l border-brand-border ml-1">
                                        <li class="flex items-center justify-between text-white font-bold">
                                            <span><i class="fa-solid fa-location-arrow text-brand-success mr-1"></i> HEAD</span>
                                            <span class="text-[9px] text-brand-muted">POINTER</span>
                                        </li>
                                        <li class="flex items-center gap-2 text-brand-success"><i class="fa-regular fa-file-lines"></i> tx/current.txpb</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: WORKFLOW -->
        <section id="workflow" class="container mx-auto px-4 reveal">
            <div class="text-center mb-16">
                <h2 class="text-2xl md:text-3xl font-display font-bold mb-2 text-white uppercase tracking-tight">CAS Write Flow</h2>
                <div class="h-1 w-10 bg-brand-primary mx-auto"></div>
                <p class="text-brand-muted mt-4 font-sans text-sm">
                    Atomic compare-and-set on <code>refs/heads/main</code>.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-9 gap-4 relative">
                <!-- Connector Line (Desktop Only) -->
                <div class="hidden lg:block absolute top-1/2 left-0 w-full h-[1px] bg-brand-border -z-10 transform -translate-y-1/2"></div>

                <!-- Steps -->
                <!-- 1 -->
                <div class="glass-panel p-4 flex flex-col items-center text-center gap-2 h-full justify-center group relative bg-black">
                    <div class="w-6 h-6 bg-brand-surface text-brand-muted flex items-center justify-center font-bold text-[10px] absolute -top-3 border border-brand-border">1</div>
                    <i class="fa-solid fa-code-branch text-brand-muted text-lg mb-1"></i>
                    <h4 class="font-bold text-[10px] uppercase text-white">Read Ref</h4>
                </div>
                <!-- 2 -->
                <div class="glass-panel p-4 flex flex-col items-center text-center gap-2 h-full justify-center group relative bg-black">
                    <div class="w-6 h-6 bg-brand-surface text-brand-muted flex items-center justify-center font-bold text-[10px] absolute -top-3 border border-brand-border">2</div>
                    <i class="fa-solid fa-glasses text-brand-muted text-lg mb-1"></i>
                    <h4 class="font-bold text-[10px] uppercase text-white">Read HEAD</h4>
                </div>
                <!-- 3 -->
                <div class="glass-panel p-4 flex flex-col items-center text-center gap-2 h-full justify-center group relative bg-black">
                    <div class="w-6 h-6 bg-brand-surface text-brand-muted flex items-center justify-center font-bold text-[10px] absolute -top-3 border border-brand-border">3</div>
                    <i class="fa-solid fa-hammer text-brand-muted text-lg mb-1"></i>
                    <h4 class="font-bold text-[10px] uppercase text-white">Build Tx</h4>
                </div>
                <!-- 4 -->
                <div class="glass-panel p-4 flex flex-col items-center text-center gap-2 h-full justify-center group relative bg-black">
                    <div class="w-6 h-6 bg-brand-surface text-brand-muted flex items-center justify-center font-bold text-[10px] absolute -top-3 border border-brand-border">4</div>
                    <i class="fa-solid fa-link text-brand-muted text-lg mb-1"></i>
                    <h4 class="font-bold text-[10px] uppercase text-white">Hash</h4>
                </div>
                <!-- 5 -->
                <div class="glass-panel p-4 flex flex-col items-center text-center gap-2 h-full justify-center group relative bg-black">
                    <div class="w-6 h-6 bg-brand-surface text-brand-muted flex items-center justify-center font-bold text-[10px] absolute -top-3 border border-brand-border">5</div>
                    <i class="fa-solid fa-check-double text-brand-muted text-lg mb-1"></i>
                    <h4 class="font-bold text-[10px] uppercase text-white">Validate</h4>
                </div>
                <!-- 6 -->
                <div class="glass-panel p-4 flex flex-col items-center text-center gap-2 h-full justify-center group relative bg-black border-brand-primary">
                    <div class="w-6 h-6 bg-brand-primary text-white flex items-center justify-center font-bold text-[10px] absolute -top-3 border border-brand-primary">6</div>
                    <i class="fa-solid fa-file-export text-brand-primary text-lg mb-1"></i>
                    <h4 class="font-bold text-[10px] uppercase text-white">Write Blobs</h4>
                </div>
                <!-- 7 -->
                <div class="glass-panel p-4 flex flex-col items-center text-center gap-2 h-full justify-center group relative bg-black">
                    <div class="w-6 h-6 bg-brand-surface text-brand-muted flex items-center justify-center font-bold text-[10px] absolute -top-3 border border-brand-border">7</div>
                    <i class="fa-solid fa-diagram-project text-brand-muted text-lg mb-1"></i>
                    <h4 class="font-bold text-[10px] uppercase text-white">Commit</h4>
                </div>
                <!-- 8 -->
                <div class="glass-panel p-4 flex flex-col items-center text-center gap-2 h-full justify-center group relative bg-black">
                    <div class="w-6 h-6 bg-brand-surface text-brand-muted flex items-center justify-center font-bold text-[10px] absolute -top-3 border border-brand-border">8</div>
                    <i class="fa-solid fa-shield-halved text-brand-muted text-lg mb-1"></i>
                    <h4 class="font-bold text-[10px] uppercase text-white">CAS</h4>
                </div>
                <!-- 9 -->
                <div class="glass-panel p-4 flex flex-col items-center text-center gap-2 h-full justify-center group relative bg-black">
                    <div class="w-6 h-6 bg-brand-surface text-brand-muted flex items-center justify-center font-bold text-[10px] absolute -top-3 border border-brand-border">9</div>
                    <i class="fa-solid fa-rotate-right text-brand-muted text-lg mb-1"></i>
                    <h4 class="font-bold text-[10px] uppercase text-white">Retry</h4>
                </div>
            </div>
        </section>

        <!-- SECTION 3: PERFORMANCE (Charts) -->
        <section id="performance" class="container mx-auto px-4 reveal">
            <div class="mb-12 flex flex-col md:flex-row justify-between items-end border-b border-brand-border pb-6">
                <div>
                    <h2 class="text-2xl md:text-3xl font-display font-bold mb-2 text-white uppercase tracking-tight">Write Throughput</h2>
                    <p class="text-brand-muted mt-2 text-sm font-sans">Writes are O(1) appends. Reads served from SQLite sidecar.</p>
                </div>
                <div class="mt-4 md:mt-0 text-right">
                    <div class="text-brand-primary font-bold text-3xl font-mono">32</div>
                    <div class="text-[10px] text-brand-muted uppercase tracking-widest">Default Max Chain</div>
                </div>
            </div>

            <div class="glass-panel p-6">
                <div class="chart-container">
                    <canvas id="complexityChart"></canvas>
                </div>
                <div class="mt-4 grid gap-2 text-[10px] text-brand-muted font-mono">
                    <div><span class="text-brand-secondary">Append + State</span> — 5000 puts / 2500 updates / 100 deletes</div>
                    <div><span class="text-brand-primary">Amend + State</span> — 2000 puts / 400 updates / 100 deletes</div>
                    <div><span class="text-brand-success">State Watch 250ms</span> — 1000 puts / 200 updates / 40 deletes</div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: FAQ -->
        <section id="faq" class="container mx-auto px-4 reveal">
            <div class="max-w-4xl mx-auto space-y-4">
                <div class="text-center mb-12">
                    <h2 class="text-2xl font-display font-bold mb-2 uppercase tracking-tight">FAQ</h2>
                    <div class="h-1 w-10 bg-brand-muted mx-auto"></div>
                </div>
                
                <details class="group bg-brand-surface border border-brand-border">
                    <summary class="flex justify-between items-center font-bold cursor-pointer list-none p-5 text-white text-sm uppercase tracking-wide hover:bg-brand-border/50 transition-colors">
                        <span>What problem does LedgerDB solve?</span>
                        <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down text-brand-primary"></i></span>
                    </summary>
                    <div class="text-brand-muted text-sm leading-relaxed px-5 pb-5 pt-0 border-t border-brand-border font-sans mt-4">
                        LedgerDB is for applications that need auditability, offline-first writes, and easy replication without running a centralized database service. It stores immutable transactions in Git, so teams can reduce infrastructure overhead while keeping a reliable, verifiable history of state changes.
                    </div>
                </details>

                <details class="group bg-brand-surface border border-brand-border">
                    <summary class="flex justify-between items-center font-bold cursor-pointer list-none p-5 text-white text-sm uppercase tracking-wide hover:bg-brand-border/50 transition-colors">
                        <span>How do reads work (CQRS + SQLite sidecar)?</span>
                        <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down text-brand-primary"></i></span>
                    </summary>
                    <div class="text-brand-muted text-sm leading-relaxed px-5 pb-5 pt-0 border-t border-brand-border font-sans mt-4">
                        Git is the write model and source of truth. The SQLite sidecar is a derived read model that can be rebuilt at any time. The indexer tails commits or the state tree and projects documents into tables for fast queries.
                    </div>
                </details>

                <details class="group bg-brand-surface border border-brand-border">
                    <summary class="flex justify-between items-center font-bold cursor-pointer list-none p-5 text-white text-sm uppercase tracking-wide hover:bg-brand-border/50 transition-colors">
                        <span>What is the state index and why is it fast?</span>
                        <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down text-brand-primary"></i></span>
                    </summary>
                    <div class="text-brand-muted text-sm leading-relaxed px-5 pb-5 pt-0 border-t border-brand-border font-sans mt-4">
                        The state tree stores the latest snapshot per document. Indexing in <span class="text-white">state</span> mode diffs the state tree and applies only changed docs (O(changes)), which makes near real-time updates practical.
                    </div>
                </details>

                <details class="group bg-brand-surface border border-brand-border">
                    <summary class="flex justify-between items-center font-bold cursor-pointer list-none p-5 text-white text-sm uppercase tracking-wide hover:bg-brand-border/50 transition-colors">
                        <span>What are append vs amend history modes?</span>
                        <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down text-brand-primary"></i></span>
                    </summary>
                    <div class="text-brand-muted text-sm leading-relaxed px-5 pb-5 pt-0 border-t border-brand-border font-sans mt-4">
                        <span class="text-white">Append</span> keeps full history per document (audit trail). <span class="text-white">Amend</span> stores only the latest state per document (compact). Both can use the state index for fast reads.
                    </div>
                </details>

                <details class="group bg-brand-surface border border-brand-border">
                    <summary class="flex justify-between items-center font-bold cursor-pointer list-none p-5 text-white text-sm uppercase tracking-wide hover:bg-brand-border/50 transition-colors">
                        <span>Why sharding in the filesystem?</span>
                        <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down text-brand-primary"></i></span>
                    </summary>
                    <div class="text-brand-muted text-sm leading-relaxed px-5 pb-5 pt-0 border-t border-brand-border font-sans mt-4">
                        Sharding spreads files across deep directories so large collections stay fast and avoid OS directory limits. It keeps lookup time stable as the dataset grows.
                    </div>
                </details>

                <details class="group bg-brand-surface border border-brand-border">
                    <summary class="flex justify-between items-center font-bold cursor-pointer list-none p-5 text-white text-sm uppercase tracking-wide hover:bg-brand-border/50 transition-colors">
                        <span>What happens when a push is rejected?</span>
                        <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down text-brand-primary"></i></span>
                    </summary>
                    <div class="text-brand-muted text-sm leading-relaxed px-5 pb-5 pt-0 border-t border-brand-border font-sans mt-4">
                        A push can be rejected when the remote advanced (non-fast-forward). The client fetches the new head and detects divergence. If auto-merge is enabled, it rehydrates both histories, applies a deterministic merge policy, writes a merge transaction, and retries the push. If it cannot merge safely, it surfaces a conflict for manual resolution.
                    </div>
                </details>

                <details class="group bg-brand-surface border border-brand-border">
                    <summary class="flex justify-between items-center font-bold cursor-pointer list-none p-5 text-white text-sm uppercase tracking-wide hover:bg-brand-border/50 transition-colors">
                        <span>Do you need Raft or consensus to be safe?</span>
                        <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down text-brand-primary"></i></span>
                    </summary>
                    <div class="text-brand-muted text-sm leading-relaxed px-5 pb-5 pt-0 border-t border-brand-border font-sans mt-4">
                        LedgerDB uses optimistic concurrency with atomic compare-and-set on the Git ref. You can choose a coordinator for single-writer semantics, or layer consensus if strict linearizability is required, but it is not mandatory for correctness.
                    </div>
                </details>

                <details class="group bg-brand-surface border border-brand-border">
                    <summary class="flex justify-between items-center font-bold cursor-pointer list-none p-5 text-white text-sm uppercase tracking-wide hover:bg-brand-border/50 transition-colors">
                        <span>How is the tree validated during commit?</span>
                        <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down text-brand-primary"></i></span>
                    </summary>
                    <div class="text-brand-muted text-sm leading-relaxed px-5 pb-5 pt-0 border-t border-brand-border font-sans mt-4">
                        Each write produces deterministic transaction bytes, hashes them, and updates the stream HEAD pointer. The commit rewrites only the affected paths, then atomically swaps refs/heads/main. If the ref moved, the write is rejected and retried, guaranteeing the committed tree matches the expected parent state.
                    </div>
                </details>

                <details class="group bg-brand-surface border border-brand-border">
                    <summary class="flex justify-between items-center font-bold cursor-pointer list-none p-5 text-white text-sm uppercase tracking-wide hover:bg-brand-border/50 transition-colors">
                        <span>Is LedgerDB a replacement for Redis or DynamoDB?</span>
                        <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down text-brand-primary"></i></span>
                    </summary>
                    <div class="text-brand-muted text-sm leading-relaxed px-5 pb-5 pt-0 border-t border-brand-border font-sans mt-4">
                        Not a drop-in replacement. LedgerDB trades microsecond latency and managed global throughput for auditability, offline-first writes, and decentralized replication. It can be a lower-cost alternative for many workloads that do not need a centralized cloud database.
                    </div>
                </details>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="border-t border-brand-border bg-[#000000] py-12 font-mono text-xs">
        <div class="container mx-auto px-6">
            <div class="grid md:grid-cols-4 gap-8 mb-12">
                <div class="col-span-2">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="font-bold text-lg text-white tracking-widest">LedgerDB</span>
                    </div>
                    <p class="text-brand-muted max-w-sm mb-4">
                        The open-source, git-native database for high-integrity systems.
                    </p>
                    <p class="text-brand-primary">Supported by code|company</p>
                </div>
                
                <div>
                    <h5 class="font-bold text-white mb-4 uppercase tracking-widest">Related Projects</h5>
                    <ul class="space-y-2 text-brand-muted">
                        <li><a href="https://osvaldoandrade.github.com/codeq" target="_blank" class="hover:text-brand-primary hover:underline">CodeQ</a></li>
                        <li><a href="https://osvaldoandrade.github.com/tikti" target="_blank" class="hover:text-brand-primary hover:underline">Tikti</a></li>
                        <li><a href="https://osvaldoandrade.github.com/neuron" target="_blank" class="hover:text-brand-primary hover:underline">Neuron</a></li>
                    </ul>
                </div>
                
                <div>
                    <h5 class="font-bold text-white mb-4 uppercase tracking-widest">System</h5>
                    <ul class="space-y-2 text-brand-muted">
                        <li><a href="https://github.com/osvaldoandrade/ledgerdb" class="hover:text-brand-primary hover:underline">GitHub</a></li>
                        <li><a href="./wiki/" class="hover:text-brand-primary hover:underline">Docs</a></li>
                    </ul>
                </div>
            </div>
            
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // --- 1. Colors & Defaults ---
        const colors = {
            primary: '#8B5CF6',
            secondary: '#F59E0B',
            success: '#10B981',
            text: '#E5E5E5',
            muted: '#737373'
        };
        Chart.defaults.color = colors.muted;
        Chart.defaults.borderColor = '#333';
        Chart.defaults.font.family = "'JetBrains Mono', monospace";

        // --- 2. Scroll Reveal Observer ---
        document.addEventListener('DOMContentLoaded', () => {
            const reveals = document.querySelectorAll('.reveal');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if(entry.isIntersecting) {
                        entry.target.classList.add('active');
                    }
                });
            }, { threshold: 0.1 });
            
            reveals.forEach(el => observer.observe(el));
        });

        // --- 3. Tab Logic ---
        function switchTab(tabName) {
            const tabs = ['cli', 'go', 'rust', 'ts'];
            
            tabs.forEach(t => {
                const btn = document.getElementById(`btn-${t}`);
                const content = document.getElementById(`content-${t}`);
                
                if (t === tabName) {
                    content.classList.remove('hidden');
                    btn.className = 'px-6 py-3 text-xs font-bold text-white bg-black border-t-2 border-brand-primary tracking-wider transition-all';
                } else {
                    content.classList.add('hidden');
                    btn.className = 'px-6 py-3 text-xs font-bold text-brand-muted hover:text-white hover:bg-black/50 tracking-wider transition-all';
                }
            });
        }

        // --- 4. Throughput Chart ---
        const valueLabelPlugin = {
            id: 'valueLabel',
            afterDatasetsDraw(chart) {
                const { ctx } = chart;
                ctx.save();
                chart.data.datasets.forEach((dataset, datasetIndex) => {
                    const meta = chart.getDatasetMeta(datasetIndex);
                    if (meta.hidden) return;
                    
                    meta.data.forEach((element, index) => {
                        const value = dataset.data[index];
                        const label = Number(value).toFixed(2);
                        ctx.fillStyle = '#E5E5E5';
                        ctx.font = '10px JetBrains Mono';
                        ctx.textAlign = 'left';
                        ctx.textBaseline = 'middle';
                        ctx.fillText(label, element.x + 8, element.y);
                    });
                });
                ctx.restore();
            }
        };
        Chart.register(valueLabelPlugin);

        const ctxComp = document.getElementById('complexityChart').getContext('2d');
        new Chart(ctxComp, {
            type: 'bar',
            data: {
                labels: ['Append', 'Amend', 'Watch'],
                datasets: [{
                    label: 'Avg writes/sec',
                    data: [56.72, 65.79, 65.26],
                    backgroundColor: [colors.secondary, colors.primary, colors.success],
                    borderRadius: 2,
                    barThickness: 16
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: '#0A0A0A',
                        titleFont: { family: 'JetBrains Mono' },
                        bodyFont: { family: 'JetBrains Mono' },
                        borderColor: '#333',
                        borderWidth: 1,
                        callbacks: {
                            label: (ctx) => `${ctx.parsed.x} writes/sec`
                        }
                    }
                },
                scales: { 
                    y: { 
                        grid: { display: false },
                        ticks: { font: { size: 10 } }
                    },
                    x: {
                        beginAtZero: true,
                        grid: { color: 'rgba(51,51,51,0.5)' },
                        title: { display: true, text: 'avg writes/sec', font: { size: 10 } }
                    }
                }
            }
        });
    </script>
</body>
</html>
